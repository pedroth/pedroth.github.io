<header>
    <div class="container">
        <div class="row">
            <div class="col-lg-auto col-md-auto mx-auto">
                <div class="post-heading">
                    <h1>My intuition on Calculus</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-auto col-md-auto mx-auto">
                <h2> Intro </h2>
                This article will summarize the basics one dimensional calculus, by discovering calculus using simple problems. In that way we will get much more the intuition of calculus and why it is useful, since it a wonderful tool to work with continuous functions.

                <h2> Functions </h2>
                First of all before writing about calculus we must know what a function is. A function is like a mathematical machine that receives some input and returns an
                output. The input and output could be anything. Here I will just write about functions of one input or univariate functions (one variable functions), but in general a function can have multiple inputs.<br>
                Every function has a domain which is the set of all possible input values and a co-domain which is the set of all outputs. A function assigns only one output for each input.<br>
                A typical notation for a function is $F: X \rightarrow Y$ where $F$ represents the function name ,$X$ is the input set and $Y$ is the output set. For a particular value $x \in X$, one writes $y = F(x)$, where $y \in Y$, in order to evaluate the function $F$ on the input $x$.<br><br>

                Consider the following examples of functions :
                <ul>
                    <li>$F: \text{Dollars} \rightarrow \text{Euros};\;\;\;\;\;F(1) = 0.86$</li>
                    <li>$F: \text{Countries} \rightarrow \text{Capitals};\;\;\;\;\;F(\text{"Portugal"}) = \text{"Lisboa"}$</li>
                    <li>$F: \text{Words in English} \rightarrow \text{Words in Portuguese};\;\;\;\;\;F(\text{"Hello"}) = \text{"Ola"}$</li>
                    <li>$F: \text{Problems} \rightarrow \text{Solutions}$</li>
                </ul>
                <br>
                In this article we will only refer to functions $F : \mathbb{R}\rightarrow \mathbb{R}$. Which are the functions that we are interested in <a href="https://en.wikipedia.org/wiki/Calculus">Calculus</a>.<br>
                Let $f : x \in \mathbb{R}\rightarrow y \in \mathbb{R}$.<br>
                Let $$ f(x) = 2x + 1$$
                We can compute $y$ in the follow way:
                <div style="text-align: center;">
                    $x = $ <input type="number" style="width: 55px;" id="simple_function_x" value="1" onchange="y()">
                </div>
                <div id="simple_function"></div>
                <script>
                    function y() {
                        $("#simple_function").html("$$y = f(" + $("#simple_function_x").val() + ") = 2(" + $("#simple_function_x").val()  + ") + 1 = " + ( 2 *
                        $("#simple_function_x").val() +  1) + " $$");
                        MathJax.Hub.Queue(["Typeset", MathJax.Hub, "simple_function"]);
                    }
                    y();
                </script>

                A good visualization of a function is the graph of one (check Fig.1) where the curve represents all the points $(x, f(x))$. Any curve that you can imagine such
                that there are no two points in the curve with the same $x$ coordinate, is a valid graph of a function. For more about functions check <a
                    href="https://en.wikipedia.org/wiki/Function_(mathematics)"> wikipedia </a>.
                <br>
                <br>

                <div style="text-align: center;">
                    <img border="0" src="http://s3.amazonaws.com/answer-board-image/74d15c42-347a-416b-a659-37672b146c72.png" height="400" width="400"/></a>
                    <p>Fig.1 Graph of a function</p>
                </div>
                <br>
                <br>
                <h2> Linear Functions </h2>
                Now let me give you a problem, suppose you wanted to find a function $f: x \in \mathbb{R} \rightarrow y \in \mathbb{R}$, such that for input $a$ we will
                get $f(a)$ and for $b$ the output $f(b)$. How do you do it ? This function must also fulfil the condition that the graph is a continuous curve (more on that
                later, but a brief definition could be $\forall x \in [a,b]$ and $\varepsilon > 0$ but close to zero then $f(x \pm \varepsilon) \approx f(x)$).<br>

                A possible solution is as follows. Imagine a function as a graph, then we already have two points of the curve $(a,f(a))$ and $(b,f(b))$. Now just trace a curve
                between those two points (as long as follows the rules above) and voila! The problem with such method is that it isn't very precise, we
                need a way to compute $y$ given $x$ in a mechanic /computational way. The most simple curve I can imagine is a straight line between the two points $(a,f(a))$ and $(b,f(b))$.
                <br/>
                <br/>

                <div style="text-align: center;">
                    <img border="0" height="360"
                         src="https://2.bp.blogspot.com/-AOz15UYfheE/U4n2SR-kWpI/AAAAAAAAAIE/YKaUAfDNaEw/s400/line.png"
                         width="400"/>

                    <p>Fig.2 Linear function</p>
                </div>
                <br/>
                <br/>

                A solution can be found by looking to figure 2. We see two triangles, triangle $t =\left < (a,f(a)) , (x,f(a)), (x,f(x)) \right >$ and triangle $T = \left <
                (a,f(a)),(b,f(a)),(b,f(b))\right >$. Its easy to see that all angles of $t$ are equal to the angles of $T$, hence the triangles are similar (this means $T$
                is scaled version of $t$), which mean that:
                $$(x - a) k = (b - a)$$
                $$(f(x) - f(a)) k = f(b) -f(a) \;\;\;\;\;\;\;(1)$$

                Hence $k = \frac{b-a}{x-a}$ , then by substituting $k$ on (1) we get :
                $$ f(x) = f(a) + \frac{f(b)-f(a)}{b-a} (x - a)\;\;\;\;\;\;\;(2)$$

                Equation (2) is the equation of the line. I leave as an exercise to check that in fact this equation solves our problem (just compute $f(a)$ and $f(b)$ using (2)). Plus we can find any other point on the line using this equation.<br><br>
                There is still other way to get the line equation that I want explain. This approach let us see functions in a different geometric way such that it will be easier to extend to more variables.
                The idea is to think of a function as a transformation of the space of inputs to the space of outputs. The real x-axis will be deformed, stretched, squeezed and reversed into the y-axis. In Simulation 1 we can see each point of the x-axis being mapped by $f$ to the y-axis.<br><br>

                <button class="btn btn-primary" onclick="intuition.run(0)"><h4> Simulation 1</h4></button>
                <div id="sim1" style="display:none">
                    <canvas id="linearFunctionGraph" width="500" height="500"></canvas>
                    <canvas id="linearFunctionTransformation" width="500" height="500"></canvas>
                    <div style="text-align: center;">
                        <p>Simulation.1 Linear function graph( left ) vs Linear function transformation ( right ). You can interact with the left canvas (mouse | touch).</p>
                    </div>
                </div>
                <br><br>

                <div style="text-align: center;">
                    <img border="0" height="360"
                         src="https://1.bp.blogspot.com/-KwDnfLPz7pA/Wk6p01LWVdI/AAAAAAAAAfk/U_F_qnB8B7oOZIk0MAlfCy5RBX4GXQfzQCLcBGAs/s1600/LinearGraphII.png"
                         width="600"/>
                    <p>Fig.3 Linear function as a transformation of spaces</p>
                </div><br><br>

                Lets find the line equation with this interpretation of functions. I would say that is easy to find a transformation between the $[0,1]$ interval to the $[a,b]$ where $a < b$ and  $a,b \in \mathbb{R}$.
                Start with a point $a$ then add a vector $v = b - a$ ( check image Fig.3 ) you will end up with point $a + (b - a) = b$. Scale $v$ with $t\in [0,1]$ and add it again to $a$, you would get a new point in between $a$ and $b$ (eg. if $t = \frac{1}{2}$ then you will get $a + \frac{v}{2} = \frac{a + b}{2}$, which is half distance between $a$ and $b$ ).
                If you consider all the points of the form
                $$x(t) = a + vt ,\; t\in[0,1] \;\;\;\;\;\;\;(3)$$
                You will get all the points in the interval $[a,b]$. We have just created a simple linear function from $[0,1] \rightarrow [a,b]$. Using this knowledge we can build any function between intervals as follows.


                <div style="text-align: center;">
                    <img border="0" height="360"
                         src="https://4.bp.blogspot.com/-nM4WNfWUDHY/WkwhNSEGutI/AAAAAAAAAfE/v95MF6yju-otfiiCFTsDlbV57gK2liTIACLcBGAs/s1600/LinearGraph.jpg"
                         width="600"/>
                    <p>Fig.4 Finding a function between intervals using two simple functions.</p>
                </div><br><br>

                Lets say we have the same problem as before, we want to create a simple continuous function $f$ from $[a, b]$ to $[f(a), f(b)] = [f_a, f_b]$. We found from fig. 4 that we can deduce $f$ by computing $\alpha ( \gamma^{-1} (x))$.
                But wait a minute, why would someone build two functions in order to find just one ? Seems counterproductive, right ?
                Let me fill you with the details, as said we want to find $f : x \in [a, b] \rightarrow y \in [f(a), f(b)]$, but this is not trivial unless we knew fig. 2. But it is trivial to build functions from $[0,1]$ to any other interval as we demonstrated before ( fig. 3 ).<br>
                So we build two trivial functions $\gamma : t \in [0,1] \rightarrow x \in [a, b]$ and $\alpha : t \in[0,1] \rightarrow y \in [f_a, f_b]$ then compute $f(x_0)$, where $x_0 \in [a, b]$ as follows :
                Compute the inverse of $\gamma$, which is $\gamma^{-1} : x \in [a, b] \rightarrow t \in [0,1]$. Then apply $\alpha$ to $\gamma ^{-1} (x_0)$, and you are done ( check fig.4 for a visual aid )!
                To finalize this idea lets compute $f$ using this auxiliary functions and see if we get the same result as equation (2). Using equation (3) we find that:

                $$\gamma(t) = a + (b - a) t$$
                $$\alpha(t) = f_a + (f_b - f_a) t$$

                Now to compute $\gamma^{-1}$ we must find $t$ in terms of $x = \gamma$.

                $$x = a + (b-a) t$$
                $$x - a = (b-a) t$$
                $$\frac{x-a}{b-a} = t$$
                $$\gamma^{-1}(x) = t \;\;\;\;\;\;\;(4)$$

                Finally we can compute $f$ by composing the two functions as in fig. 4, and we get :

                $$f = \alpha ( \gamma ^{-1} (x) ) = f_a + (f_b - f_a) \gamma^{-1} (x)$$

                Substituting (4),

                $$f(x) = f_a + (f_b - f_a) \frac{x - a}{b - a}\;\;\;\;\;\;\;(5)$$

                And (5) is equal to (2)!! This method is sometimes easier to generalize to higher dimensions as you will see in a future post.<br><br>

                Note that if $(x - a) = 1$ then $x = a + 1$ hence $f(a + 1) - f(a) = \frac{f(b) - f(a)}{b - a}$ which means $\frac{f(b) - f(a)}{b - a}$ is the rate of
                change ( gradient ) of this curve. This means that for a step $ h $ in the domain,  $f$ will change by $h \frac{f(b)-f(a)}{b-a}$, that is $f(a + h) - f(a) = \frac{f(b) - f(a)}{b - a} h$.
                <br/>
                <br/>

                <h2> Derivatives </h2>

                Let me give you another problem, imagine that someone gave you a machine that computes a function $f : x \in \mathbb{R} \rightarrow y\in \mathbb{R}$. That person tells you that the graph of the function is a smooth curve. Imagine also that you can't visualize that graph. Then he ask you if the
                function at a particular $x$ is increasing or decreasing ? And how much it is increasing or decreasing ? <br>
                So here we are asked to define a way to measure how much a function is increasing or decreasing locally.
                If we could visualize the function then the first question should be easy, but the issue is that we can't visualize it. This is interesting in terms of computation since computers can only evaluate the function but cannot see a graph of a function.
                There are other motivations to do such definition, such as getting a precise measurable way of saying that a functions is increasing/decreasing (and to what degree). Also we can't visualize functions with more than two inputs (this is useful for future posts).<br>
                Lets start with simple functions. Let us use function of a line between two points $(a, f(a))$ and $(b, f(b))$. As we saw this is defined by (2) :

                $$f(x) = f(a) + \frac{f(b) - f(a)}{b - a} (x - a)$$

                We saw that $\frac{f(b) - f(a)}{b - a}$ is the rate of change of (2) and thus it tell us how much the linear function change per unit of the space in the domain.
                For different functions we could construct a line between nearby points $(x, f(x))$ and $(x + h, f(x + h))$ ( $h > 0$ ), this line approximates function $f$ near $x$ check fig.5. Using this line we can compute its rate of change and estimate the rate of change of $f$ at $x$.
                The rate of change of this line is :

                $$df(x, h) = \frac{f(x + h) - f(x)}{h}$$

                This approximation depends on $h$, as $h$ gets closer to zero the better the line approximates the function at $x$. Still we want to get the best estimate for the gradient, so how can we select the right $h$ ?
                If $h$ is too big then $df$ will be a poor estimate of the rate of change at $x$ (and what is too big ?). If too small such as $h = 0$ we will get $\frac{0}{0}$, which is undefined.
                Even if we choose a particular small value of $h$ ($h > 0 $), there are still an infinite number of numbers $\varepsilon > 0 $, which are $\varepsilon < h$ such that $df(x,\varepsilon)$ is a better  estimate of the gradient of $f$ at $x$.<br>
                Now we are in a bit of a dilemma here since we don't know how to define a proper $h$ such that $df(x, h)$ defines a rate of change of the function at $x$.
                <br/>
                <br/>

                <div style="text-align: center;">
                    <img border="0"
                         src="http://www.teacherschoice.com.au/images/derivative_secant_1.gif"
                         height="324" width="400"/>

                    <p>Fig.5 Secant approximation</p>
                </div>
                <br/>
                <br/>

                To solve this issue we can think of what I said earlier. As $h$ gets closer to $0$ the line formed by $(x, f(x))$ and $(x+h, f(x+h))$ better approximates the function near $x$ (check fig.6 and simulation 2), hence this line is changing less and less therefore this line is converging.
                Although $h$ must be $h > 0$, we can say the same about $ df(x, h) $ and thus it is converging to some number as $h \rightarrow 0$.<br><br>

                <button class="btn btn-primary" onclick="intuition.run(1)"><h4> Simulation 2</h4></button>
                <div id="sim2" style="display:none; text-align: center">
                    <canvas id="secantApproximation" width="500" height="500"></canvas>
                    <div class="container">
                        <div class="row">
                            <div class="col-sm-3">
                                <select id="function_sim2" onchange="intuition.apply(1, function(x) {x.selectUpdate();})">
                                    <option value="Quadratic">Quadratic</option>
                                    <option value="Polynomial">Polynomial</option>
                                    <option value="Sine">Sine</option>
                                    <option value="Exponential">Exponential</option>
                                </select>
                            </div>
                            <div class="col-sm-3">
                                <input id="h_slider" type="range" min="1" max="100" value="90" onchange="intuition.apply(1, function(x) {x.sliderUpdate();})">
                            </div>
                            <div class="col-sm-3">
                                <div id="h_sim">$h = $ 1</div>
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <p>Simulation.2 Secant Approximation of various functions. You can interact with the canvas (mouse | touch).</p>
                    </div>
                </div>
                <br><br>

                <div style="text-align: center;">
                    <img border="0"
                         src="http://www.teacherschoice.com.au/images/derivative_secant_2.gif"
                         height="230" width="400"/>

                    <p>Fig.6 Tangent approximation</p>
                </div>
                <br/>
                <br/>

                This line of thinking let mathematicians to define the concept of derivative of $f$ at $x$:

                $$f'(x) = \lim_{h\rightarrow 0} \frac{f(x+h) - f(x)}{h}\;\;\;\;\;\;\;(6)$$

                Which is just the rate of change of the line between $(x, f(x))$ and $(x + h, f(x + h))$ as $h \rightarrow 0$, that is $\lim_{h\rightarrow 0} df(x, h)$.
                The intuitive meaning of (6) is to define the instantaneous rate of change of $f$, by the value $df(x,h)$ is converging when $h\rightarrow0$.
                Note that this definition only applies to functions that have such limit number. This might not be the case for all functions and thus let me simplify the problem by only allowing functions that have derivative for all $x$.
                These functions are called differentiable functions.<br>
                So what do you mean by $\lim_{h \rightarrow 0} df(x,h)$ ? What is the limit of a function $f$ as $x$ approaches a number ? <br>
                This will take us to a little digression to limits.
                <h2>Limits interlude</h2>

                <h2>Back to derivatives</h2>
                Finally we solve our problem of measuring how much a function (differentiable function!!) is changing at a particular $x$.<br>

                <h2>Digression through 1D Optimization</h2>

                <br/>
                <br/>

                <h2> Integrals </h2>
                I have written about functions, tangent lines and derivatives what about integration, for that I will give you another problem. Suppose you wanted to find a
                function $y(t)$, and the only thing you know about that function is it derivative for all $t$(we have this $y'(t)$) and that $y(t_{0}) = y_{0}$. How would you solve
                this? Using the ideas above, with the derivative we can draw a tangent line, then we can compute the function a little step ahead , like $$y(t_{0} + h) = y(t_{0}) +
                y'(t_{0}) h\;\;\;\;\;\;\;(4)$$
                <br/>
                <br/>

                <div style="text-align: center;">
                    <img border="0" src="http://tutorial.math.lamar.edu/Classes/DE/EulersMethod_files/image001.gif" height="253" width="400"/>

                    <p>Fig.7 Euler step</p>
                </div>
                <br/>
                <br/>

                So if we wanted to find $y(t)$ we would get a approximate result like this:<br/>
                First choose a $h > 0$ close to zero, then we sum various steps of the tangent lines like figure 6.
                <br/>
                <br/>

                <div style="text-align: center;">
                    <img border="0" height="337"
                         src="https://1.bp.blogspot.com/-LdEJcMlXgH0/U90QHj4oJMI/AAAAAAAAAKA/p81Euh31eb4/s640/DF.png"
                         width="640"/>

                    <p>Fig.8 Euler step II</p>
                </div>
                <br/>
                <br/>
                This translates in the following equation:$$y(t) \approx y(t_{0}) + \sum_{i= 0}^{n}y'(t_{0}+ih)h =y(t_{0}) + y'(t_{0})h + y'(t_{0} + h) h +
                ...\;\;\;\;\;\;\;(5)$$<br/>
                <br/>
                where $n= \left \lfloor \frac{t-t_{0}}{h} \right \rfloor$, note that as $h\rightarrow0$ the approximation gets better and $n \rightarrow \infty $. Also note that
                summations of the form $$ \lim_{\Delta x\rightarrow0} \; \sum_{i= 0}^{n}f(a+i\Delta x)\Delta x$$ corresponds to areas under the graph of the function $f$.
                <br/>
                <br/>

                <div style="text-align: center;">
                    <img border="0"
                         src="http://upload.wikimedia.org/wikipedia/commons/2/27/Integral_definida_rectangulos.jpg"
                         height="412" width="640"/>

                    <p>Fig.9 Integral definition</p>
                </div>
                <br/>
                <br/>
                Hence we can solve our problem using (5) while $h \rightarrow 0$.<br/>
                $$y(t) = y(t_{0}) + \lim_{h\rightarrow0} \; \sum_{i= 0}^{n}y'(t_{0}+ih)h.\;\;\;\;\;\;\;(6)$$<br/>
                <br/>
                Now to simplify the notation we define integral as $$\lim_{h\rightarrow0} \; \sum_{i= 0}^{n}f(a+ih)h = \int_{a}^{b} f(x) dx, n= \left \lfloor \frac{b-a}{h} \right
                \rfloor\;\;\;\;\;\;\;(7)$$<br/>
                <br/>
                With (6) and (7) we get $$y(t) = y(t_{0}) + \int_{t_{0}}^{t} y'(\tau) d\tau$$.<br/>
                <br/>
                Hence $$\int_{t{0}}^{t} y'(\tau) d\tau = y(t) - y(t_{0})$$ which is the fundamental theorem of calculus<br/>
                <br/>
                Final remark<br/>
                <br/>
                To compute
                $$\lim_{x\rightarrow a}f(x)$$
                <br/>
                just do the following iteration. Start $x(0) = x_{0}$ then iterate
                $$x(i+1) = x(i) + (a - x(i)) \epsilon$$
                <br/>
                and stop the iteration when
                $$|f(x(i)) - f(x(i-1))| < \delta$$.
                <br/>
                Where $0 < \epsilon < 1$ and $\forall \delta > 0$. Then return $\lim_{x\rightarrow a}f(x) = f(x(i_{converge}))$.
            </div>
        </div>
    </div>
</article>
<script src="IntuitionOfCalculus.js"></script>