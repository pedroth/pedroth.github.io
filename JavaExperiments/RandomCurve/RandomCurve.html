<html>
<head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NQKJHP3');</script>
<!-- End Google Tag Manager -->
    <style>
        #experimentsTab {
        display: none
        }

        #projectTitle {
        color : rgb(255,255,255)
        }

        #header{
        background: #212121;
        background: -moz-linear-gradient(top, #373737, #212121);
        background: -webkit-linear-gradient(top, #373737, #212121);
        background: -ms-linear-gradient(top, #373737, #212121);
        background: -o-linear-gradient(top, #373737, #212121);
        background: linear-gradient(top, #373737, #212121);
        }

        #footer{
        background: #212121;
        background: -moz-linear-gradient(top, #373737, #212121);
        background: -webkit-linear-gradient(top, #373737, #212121);
        background: -ms-linear-gradient(top, #373737, #212121);
        background: -o-linear-gradient(top, #373737, #212121);
        background: linear-gradient(top, #373737, #212121);
        color: #fff;
        padding: 50px 10px 5px 10px;
        }

        #main_content{
            padding-right: 1px;
            padding-left: 1px;
        }

        .tr-caption-container {
            margin-top: 10px;
            margin-bottom: 10px;
        }
    </style>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="VisualExperiments : ">
    <script type="text/x-mathjax-config">
	  	MathJax.Hub.Config({
	    extensions: ["tex2jax.js"],
	    jax: ["input/TeX", "output/HTML-CSS"],
	    tex2jax: {
	      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
	      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
	      processEscapes: true
	    },
	    "HTML-CSS": { availableFonts: ["TeX"] }
	  });
    </script>

    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
    <!-- MathJax -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML'
            type='text/javascript'></script>
    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.11.2/css/bootstrap-select.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.11.2/js/bootstrap-select.min.js"></script>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NQKJHP3"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div id="header" class="jumbotron text-center">
    <a href="https://pedroth.github.io/visualExperiments/"><h1 id="projectTitle">VisualExperiments</h1></a>
    <ul class="list-inline">
        <li>
            <h3><a href="javascript:void(0)" id="experimentsName">Experiments</a></h3>
        </li>
        <li><h3><a href="https://pedroth.github.io/visualExperiments/Blog/Blog.html">Blog</a></h3></li>
        <li><h3><a href="https://www.youtube.com/user/peterluigi/">Youtube</a></h3></li>
        <li><h3><a href="https://www.khanacademy.org/profile/pedroth/programs">Khan Academy</a></h3></li>
    </ul>
    <div>
        <ul class="list-inline" id="experimentsTab">
            <li><h3><a href="https://pedroth.github.io/visualExperiments/JsExperiments/JsExperiments.html">
                JsExperiments </a></h3></li>
            <li><h3><a href="https://pedroth.github.io/visualExperiments/JavaExperiments/JavaExperiments.html">
                JavaExperiments </a></h3></li>
        </ul>
    </div>
    <script> $("#experimentsName").click( function() { $("#experimentsTab").slideToggle();})</script>
</div>

<div class="container">


<h1>RandomCurve</h1>
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-auto col-md-auto mx-auto">
                Random Curve is a simple application that generates a "random" curve in time.
                </br>
                The "random" curve $\gamma$ is generated as follows :
                </br>
                <center>
                    $X\sim \text{Uniform}(0,1)$
                    </br></br>
                    $\ddot{\theta} = 100X - 50 -\dot \theta$
                    </br></br>
                    $\dot \gamma = \mathbf{e_r}(\theta)$
                    </br></br>
                    $\mathbf{e_r}(\theta) =\begin{bmatrix}
                    \cos (\theta)\\
                    \sin(\theta)
                    \end{bmatrix}$
                    </br></br>
                </center>
                Below you will find a javascript port of the java version. (also available on my khan academy)
                </br>
                Press "h" for help. Feel free to download the program below.
                </br>
                </br>
                <center>
                    <canvas id="canvas" width="560" height="400"></canvas>
                </center>
                </br>
                </br>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.4.8/processing.min.js"></script>
                <script>
                    var canvas = document.getElementById("canvas");
                    var processing = new Processing(canvas, function(processing) {
                        processing.size(canvas.width, canvas.height);
                        processing.background(0xFFF);
                        var mouseIsPressed = false;
                        processing.mousePressed = function () { mouseIsPressed = true; };
                        processing.mouseReleased = function () { mouseIsPressed = false; };
                        var keyIsPressed = false;
                        processing.keyPressed = function () { keyIsPressed = true; };
                        processing.keyReleased = function () { keyIsPressed = false; };
                        function getImage(s) {
                            var url = "https://www.kasandbox.org/programming-images/" + s + ".png";
                            processing.externals.sketch.imageCache.add(url);
                            return processing.loadImage(url);
                        }
                        // use degrees rather than radians in rotate function
                        var rotateFn = processing.rotate;
                        processing.rotate = function (angle) {
                            rotateFn(processing.radians(angle));
                        };
                        with (processing) {
                            /**
                            * go to https://sites.google.com/site/visualexponetial/home/randomcurve
                            * for the original.
                            */
                            var gamma;
                            var omega;
                            var theta;
                            var oldPoint;  //oldPoint[0] = x, oldPoint[1] = y;
                            var newPoint;  //newPoint[0] = x, newPoint[1] = y;
                            var time;
                            var isInit = true;
                            var currentTime;
                            var oldTime;
                            var speed;
                            var timeColor;
                            /**
                             * do not change this
                             * */
                            var xmin = -5;
                            var xmax = 5;
                            var ymin = -5;
                            var ymax = 5;
                            var w= canvas.width;
                            var h = canvas.height;

                            var computeDxdt = function() {
                               return cos(theta);
                            };

                            var computeDydt = function() {
                                return sin(theta);
                            };

                            var computeColor = function( t ){
                                var x = [];
                                x[0] = round(255 * sin(3*t) * sin(3*t));
                                x[1] = round(255 * sin(6*t) * sin(6*t));
                                x[2] = round(255 * sin(12*t) * sin(12*t));
                                return x;
                            };

                            var changeXcoord = function(x){
                                return ((x - xmin) * w) / abs(xmax - xmin);
                            };

                            var changeYcoord = function(y){
                                return -((y - ymax) * h) / abs(ymax - ymin);
                            };

                            var drawLine = function( x1,  y1, x2, y2){
                                var i1 = changeXcoord(x1);
                                var j1 = changeYcoord(y1);
                                var i2 = changeXcoord(x2);
                                var j2 = changeYcoord(y2);
                                line(i1,j1,i2,j2);
                            };

                            var euler = function() {
                                currentTime = millis() * 1E-3;
                                var dt = currentTime - oldTime;
                                /**
                                 * time in seconds
                                 */
                                oldTime = currentTime;
                                time += dt;

                                if (oldPoint[0] > 5){
                                    oldPoint[0] = -5;
                                } else if (oldPoint[0] < -5) {
                                    oldPoint[0] = 5;
                                } else if (oldPoint[1] > 5) {
                                    oldPoint[1] = -5;
                                } else if (oldPoint[1] < -5) {
                                    oldPoint[1] = 5;
                                }
                                var initX = oldPoint[0];
                                var initY = oldPoint[1];

                                // full around with these parameters
                                gamma = 100 * random(0,1) - 50 - omega;
                                omega = omega + gamma * dt * speed;
                                theta = theta + omega * dt * speed;

                                var dxdt = computeDxdt();
                                var dydt = computeDydt();

                                /*
                                * x(n+1) = x(n) + dx/dt * dt | where dx/dt = er(theta);
                                * er(theta) = {cos(theta),sin(theta)};
                                * theta is solution of alfa = 100 * X - 50 - omega;
                                * alfa = theta'' and omega = theta'
                                *
                                * X ~ Uniform(0,1);
                                */
                                newPoint[0] = initX + dt * dxdt * speed;
                                newPoint[1] = initY + dt * dydt * speed;

                                timeColor = computeColor(time);
                                stroke(timeColor[0],255,255);
                                drawLine(oldPoint[0], oldPoint[1], newPoint[0], newPoint[1]);
                                oldPoint[0] = newPoint[0];
                                oldPoint[1] = newPoint[1];
                            };

                            var init = function() {
                                var size = 2;
                                oldPoint = [];
                                newPoint = [];
                                for(var i = 0; i < size; i++) {
                                    newPoint[i] = random(-5,5);
                                    oldPoint[i] = random(-5,5);
                                }
                                theta = random(0,2*3.141592);
                                omega = random(0,2*3.141592);
                                background(0, 0, 0);
                                oldTime = millis() * 1E-3;
                                time = 0;
                                speed = 5;
                                isInit = false;
                                colorMode(HSB);
                            };

                            var mouseReleased = function(){
                                oldPoint[0] = xmin + (mouseX/w) * abs(xmax-xmin);
                                oldPoint[1] = ymax - (mouseY/h) * abs(ymax-ymin);
                            };

                            var draw = function() {
                                 if(isInit) {
                                    init();
                                 }
                                 euler();
                            };
                        }
                        if (typeof draw !== 'undefined') processing.draw = draw;
                    });
                </script>
                <br><br>
                <center>
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/gOz2MV5Z-D0" frameborder="0" allowfullscreen></iframe>
                </center>
                <br><br>
            </div>
        </div>
    </div>
</article>
</br></br></br><p>Download app here :<a href='RandomCurve.zip'>RandomCurve.zip</a></p><!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'visualexperiments'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();


        </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
    Disqus.</a></noscript>
</div>


<footer id="footer" class="container-fluid">
    <p class="copyright">VisualExperiments maintained by <a href="https://github.com/pedroth">pedroth</a></p>
    <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
</footer>
</body>
</html>


</html>
